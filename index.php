<?php
// Awesome Facebook Application
// 
// Name: Virtual Tibetan Keyboard
// 

require_once '../facebook/facebook.php';

// Create our Application instance.
$facebook = new Facebook(array(
  'appId'  => '154618767914929',
  'secret' => '6c676392797f64ef224b26264ee0f1a8',
  'cookie' => true,
));

// We may or may not have this data based on a $_GET or $_COOKIE based session.
//
// If we get a session here, it means we found a correctly signed session using
// the Application Secret only Facebook and the Application know. We dont know
// if it is still valid until we make an API call using the session. A session
// can become invalid if it has already expired (should not be getting the
// session back in this case) or if the user logged out of Facebook.
$session = $facebook->getSession();

$me = null;
// Session based API call.
if ($session) {
  try {
    $uid = $facebook->getUser();
    $me = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
  }
}

// login or logout url will be needed depending on current user state.
if ($me) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl();
}

// This call will always work since we are fetching public data.
$naitik = $facebook->api('/naitik');

?>
<!doctype html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Virtual Tibetan Keyboard - Developed by Tashi Samphel</title>
    <link href="../facebook/css/keyboard.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <!--
      We use the JS SDK to provide a richer user experience. For more info,
      look here: http://github.com/facebook/connect-js
    -->
    <div id="fb-root"><img src="http://tibetmycountry.com/facebook/img/savetibet.gif" align="right" width="200" height="161" hspace="6" vspace="7" alt="Save Tibet" /></div>
    <script language="javascript">
      var VKI_attach,VKI_close;function VKI_buildKeyboardInputs(){var self=this;this.VKI_version="er 1.0 - Tasamphel";this.VKI_showVersion=true;this.VKI_target=false;this.VKI_shift=this.VKI_shiftlock=false;this.VKI_altgr=this.VKI_altgrlock=false;this.VKI_dead=true;this.VKI_deadkeysOn=true;this.VKI_kts=this.VKI_kt="Tibetan";this.VKI_langAdapt=true;this.VKI_size=3;this.VKI_sizeAdj=true;this.VKI_clearPasswords=false;this.VKI_imageURI="../facebook/img/keyboard.png";this.VKI_clickless=0;this.VKI_keyCenter=3;this.VKI_isIE=/*@cc_on!@*/false;this.VKI_isIE6=/*@if(@_jscript_version==5.6)!@end@*/false;this.VKI_isIElt8=/*@if(@_jscript_version<5.8)!@end@*/false;this.VKI_isWebKit=RegExp("KHTML").test(navigator.userAgent);this.VKI_isOpera=RegExp("Opera").test(navigator.userAgent);this.VKI_isMoz=(!this.VKI_isWebKit&&navigator.product=="Gecko");this.VKI_i18n={'00':"Click for Tibetan Keyboard",'01':"Display virtual keyboard interface",'02':"Select keyboard layout",'03':"Dead keys",'04':"On",'05':"Off",'06':"Close the keyboard",'07':"Clear",'08':"Clear this input",'09':"Version",'10':"Adjust keyboard size"};this.VKI_layout={};this.VKI_layout.Tibetan=[[["\u0F0C","\u0F38"],["\u0F21","\u0F11"],["\u0F22","\u0F04\u0F05"],["\u0F23","\u0F05"],["\u0F24","\u0F01\u0F83"],["\u0F25","\u0F82"],["\u0F26","\u0F08"],["\u0F27","\u300A"],["\u0F28","\u300B"],["\u0F29","\u0F3C"],["\u0F20","\u0F3D"],["\u0F80","\u0F81"],["\u0F7E","\u0F83","\u0F73"],["Bksp","Bksp"]],[["Tab","Tab"],["\u0F4A","\u0F4B"],["\u0F5D","\u0FAD"],["\u0F7A","\u0F7B"],["\u0F62","\u0FB2"],["\u0F4F","\u0F50"],["\u0F61","\u0FB1"],["\u0F74","\u0F75"],["\u0F72","\u0F80","\u0F9C"],["\u0F7C","\u0F7D"],["\u0F54","\u0F55"],["\u0F37","\u0F82"],["\u0F84","\u0F35"],["\u0F14","\u0FBE","\u0F03"]],[["Caps","Caps"],["\u0061","\u0F68"],["\u0F66","\u0F64"],["\u0F51","\u0F5B"],["\u0F44","\u0F52"],["\u0F42","\u0F43","\u0FB5"],["\u0F67","\u0FB7","\u0FB9"],["\u0F47","\u0F5C"],["\u0F40","\u0F41"],["\u0F63","\u0FB3"],["\u0F4D","\u0F7F"],["\u0F60","\u0F71"],["Enter","Enter"]],[["Shift","Shift"],[""],["\u0F5F","\u0F5E"],["\u0F59","\u0F5A"],["\u0F45","\u0F46","\u0F0F"],["\u0F4C","\u0F4E"],["\u0F56","\u0F57"],["\u0F53","\u0F49"],["\u0F58","\u0F65"],["\u0FB1","\u0F11","\u0F88"],["\u0FB2","\u0FB3","\u0FBE"],["\u0F0D"],["Shift","Shift"]],[["\u0F0B","\u0020"]]];this.VKI_layout.Tibetan.lang=["tb"];this.VKI_layout.Numpad=[[["$"],["\u00a3"],["\u20ac"],["\u00a5"],["/"],["^"],["Bksp","Bksp"]],[["."],["7"],["8"],["9"],["*"],["<"],["("],["["]],[["="],["4"],["5"],["6"],["-"],[">"],[")"],["]"]],[["0"],["1"],["2"],["3"],["+"],["Enter","Enter"]],[[" "]]];this.VKI_layout.Numpad.DDK=true;this.VKI_layout.US=[[["`","~"],["1","!"],["2","@"],["3","#"],["4","$"],["5","%"],["6","^"],["7","&"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["[","{"],["]","}"],["\\","|"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],[";",":"],["'",'"'],["Enter","Enter"]],[["Shift","Shift"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",","<"],[".",">"],["/","?"],["Shift","Shift"]],[[" "," "]]];this.VKI_layout.US.lang=["en-us"];this.VKI_layout["US Int'l"]=[[["`","~"],["1","!","\u00a1","\u00b9"],["2","@","\u00b2"],["3","#","\u00b3"],["4","$","\u00a4","\u00a3"],["5","%","\u20ac"],["6","^","\u00bc"],["7","&","\u00bd"],["8","*","\u00be"],["9","(","\u2018"],["0",")","\u2019"],["-","_","\u00a5"],["=","+","\u00d7","\u00f7"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q","\u00e4","\u00c4"],["w","W","\u00e5","\u00c5"],["e","E","\u00e9","\u00c9"],["r","R","\u00ae"],["t","T","\u00fe","\u00de"],["y","Y","\u00fc","\u00dc"],["u","U","\u00fa","\u00da"],["i","I","\u00ed","\u00cd"],["o","O","\u00f3","\u00d3"],["p","P","\u00f6","\u00d6"],["[","{","\u00ab"],["]","}","\u00bb"],["\\","|","\u00ac","\u00a6"]],[["Caps","Caps"],["a","A","\u00e1","\u00c1"],["s","S","\u00df","\u00a7"],["d","D","\u00f0","\u00d0"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L","\u00f8","\u00d8"],[";",":","\u00b6","\u00b0"],["'",'"',"\u00b4","\u00a8"],["Enter","Enter"]],[["Shift","Shift"],["z","Z","\u00e6","\u00c6"],["x","X"],["c","C","\u00a9","\u00a2"],["v","V"],["b","B"],["n","N","\u00f1","\u00d1"],["m","M","\u00b5"],[",","<","\u00e7","\u00c7"],[".",">"],["/","?","\u00bf"],["Shift","Shift"]],[[" "," "," "," "],["Alt","Alt"]]];this.VKI_layout["US Int'l"].lang=["en"];this.VKI_deadkey={};this.VKI_deadkey['\u0061']=[["\u0f56","\u0fa6"],["\u0f53","\u0fa3"],["\u0f4c","\u0f9c"],["\u0f45","\u0f95"],["\u0f59","\u0fa9"],["\u0fb2","\u0fbc"],["\u0f5f","\u0faf"],["\u0fb1","\u0fbb"],["\u0f58","\u0fa8"],["\u0f67","\u0fb7"],["\u0f47","\u0f97"],["\u0f42","\u0f92"],["\u0f44","\u0f94"],["\u0f51","\u0fa1"],["\u0f60","\u0f71"],["\u0f66","\u0fb6"],["\u0f63","\u0fb3"],["\u0f40","\u0f90"],["\u0f5d","\u0fad"],["\u0f62","\u0fb2"],["\u0f54","\u0fa4"],["\u0f4f","\u0f9f"],["\u0f61","\u0fb1"],["\u0f4a","\u0f9a"],["\u0f49","\u0f99"],["\u0f4e","\u0f9e"],["\u0f46","\u0f96"],["\u0f5a","\u0faa"],["\u0fb3","\u0fb3"],["\u0f5e","\u0fae"],["\u0f65","\u0fb5"],["\u0f68","\u0fb8"],["\u0f5b","\u0fab"],["\u0f71","\u0fb0"],["\u0f64","\u0fb4"],["\u0fb3","\u0fb3"],["\u0f41","\u0f91"],["\u0fad","\u0fba"],["\u0fb2","\u0fbc"],["\u0f55","\u0fa5"],["\u0f50","\u0fa0"],["\u0fb1","\u0fbb"],["\u0f4b","\u0f9b"]];this.VKI_symbol={'\u200c':"ZW\r\nNJ",'\u200d':"ZW\r\nJ"};this.VKI_attachKeyboard=VKI_attach=function(elem){if(elem.getAttribute("VKI_attached"))return false;if(this.VKI_imageURI){var keybut=document.createElement('img');keybut.src=this.VKI_imageURI;keybut.alt=this.VKI_i18n['00'];keybut.className="keyboardInputInitiator";keybut.title=this.VKI_i18n['01'];keybut.elem=elem;keybut.onclick=function(){self.VKI_show(this.elem)};elem.parentNode.insertBefore(keybut,(elem.dir=="rtl")?elem:elem.nextSibling)}else elem.onfocus=function(){if(self.VKI_target!=this)self.VKI_show(this)};elem.setAttribute("VKI_attached",'true');if(this.VKI_isIE){elem.onclick=elem.onselect=elem.onkeyup=function(e){if((e||event).type!="keyup"||!this.readOnly)this.range=document.selection.createRange()}}};var inputElems=[document.getElementsByTagName('input'),document.getElementsByTagName('textarea')];for(var x=0,elem;elem=inputElems[x++];)for(var y=0,ex;ex=elem[y++];)if((ex.nodeName=="TEXTAREA"||ex.type=="text"||ex.type=="password")&&ex.className.indexOf("keyboardInput")>-1)this.VKI_attachKeyboard(ex);this.VKI_keyboard=document.createElement('table');this.VKI_keyboard.id="keyboardInputMaster";this.VKI_keyboard.dir="ltr";this.VKI_keyboard.cellSpacing=this.VKI_keyboard.border="0";var thead=document.createElement('thead');var tr=document.createElement('tr');var th=document.createElement('th');var abbr=document.createElement('abbr');abbr.title=this.VKI_i18n['00'];abbr.appendChild(document.createTextNode('VKI'));th.appendChild(abbr);var kblist=document.createElement('select');kblist.title=this.VKI_i18n['02'];for(ktype in this.VKI_layout){if(typeof this.VKI_layout[ktype]=="object"){if(!this.VKI_layout[ktype].lang)this.VKI_layout[ktype].lang=[];var opt=document.createElement('option');opt.value=ktype;opt.appendChild(document.createTextNode(ktype));kblist.appendChild(opt)}}if(kblist.options.length){kblist.value=this.VKI_kt;kblist.onchange=function(){self.VKI_kts=self.VKI_kt=this.value;self.VKI_buildKeys();self.VKI_position(true)};th.appendChild(kblist)}if(this.VKI_sizeAdj){this.VKI_size=Math.min(5,Math.max(1,this.VKI_size));var kbsize=document.createElement('select');kbsize.title=this.VKI_i18n['10'];for(var x=1;x<=5;x++){var opt=document.createElement('option');opt.value=x;opt.appendChild(document.createTextNode(x));kbsize.appendChild(opt)}kbsize.value=this.VKI_size;kbsize.change=function(){self.VKI_size=this.value;self.VKI_keyboard.className=self.VKI_keyboard.className.replace(/ ?keyboardInputSize\d ?/,"");if(this.value!=2)self.VKI_keyboard.className+=" keyboardInputSize"+this.value;self.VKI_position(true)};kbsize.onchange=kbsize.change;th.appendChild(kbsize)}var label=document.createElement('label');var checkbox=document.createElement('input');checkbox.type="checkbox";checkbox.title=this.VKI_i18n['03']+": "+((this.VKI_deadkeysOn)?this.VKI_i18n['04']:this.VKI_i18n['05']);checkbox.defaultChecked=this.VKI_deadkeysOn;checkbox.onclick=function(){self.VKI_deadkeysOn=this.checked;this.title=self.VKI_i18n['03']+": "+((this.checked)?self.VKI_i18n['04']:self.VKI_i18n['05']);self.VKI_modify("");return true};label.appendChild(this.VKI_deadkeysElem=checkbox);checkbox.checked=this.VKI_deadkeysOn;th.appendChild(label);tr.appendChild(th);var td=document.createElement('td');var clearer=document.createElement('span');clearer.id="keyboardInputClear";clearer.appendChild(document.createTextNode(this.VKI_i18n['07']));clearer.title=this.VKI_i18n['08'];clearer.onmousedown=function(){this.className="pressed"};clearer.onmouseup=function(){this.className=""};clearer.onclick=function(){self.VKI_target.value="";self.VKI_target.focus();return false};td.appendChild(clearer);var closer=document.createElement('strong');closer.id="keyboardInputClose";closer.appendChild(document.createTextNode('X'));closer.title=this.VKI_i18n['06'];closer.onmousedown=function(){this.className="pressed"};closer.onmouseup=function(){this.className=""};closer.onclick=function(){self.VKI_close()};td.appendChild(closer);tr.appendChild(td);thead.appendChild(tr);this.VKI_keyboard.appendChild(thead);var tbody=document.createElement('tbody');var tr=document.createElement('tr');var td=document.createElement('td');td.colSpan="2";var div=document.createElement('div');div.id="keyboardInputLayout";td.appendChild(div);if(this.VKI_showVersion){var div=document.createElement('div');var ver=document.createElement('var');ver.title=this.VKI_i18n['09']+" "+this.VKI_version;ver.appendChild(document.createTextNode("v"+this.VKI_version));div.appendChild(ver);td.appendChild(div)}tr.appendChild(td);tbody.appendChild(tr);this.VKI_keyboard.appendChild(tbody);if(this.VKI_isIE6){this.VKI_iframe=document.createElement('iframe');this.VKI_iframe.style.position="absolute";this.VKI_iframe.style.border="0px none";this.VKI_iframe.style.filter="mask()";this.VKI_iframe.style.zIndex="999999";this.VKI_iframe.src=this.VKI_imageURI}this.VKI_buildKeys=function(){this.VKI_shift=this.VKI_shiftlock=this.VKI_altgr=this.VKI_altgrlock=this.VKI_dead=false;this.VKI_deadkeysOn=(this.VKI_layout[this.VKI_kt].DDK)?false:this.VKI_keyboard.getElementsByTagName('label')[0].getElementsByTagName('input')[0].checked;var container=this.VKI_keyboard.tBodies[0].getElementsByTagName('div')[0];while(container.firstChild)container.removeChild(container.firstChild);for(var x=0,hasDeadKey=false,lyt;lyt=this.VKI_layout[this.VKI_kt][x++];){var table=document.createElement('table');table.cellSpacing=table.border="0";if(lyt.length<=this.VKI_keyCenter)table.className="keyboardInputCenter";var tbody=document.createElement('tbody');var tr=document.createElement('tr');for(var y=0,lkey;lkey=lyt[y++];){var td=document.createElement('td');if(this.VKI_symbol[lkey[0]]){var span=document.createElement('span');span.className=lkey[0];span.appendChild(document.createTextNode(this.VKI_symbol[lkey[0]]));td.appendChild(span)}else td.appendChild(document.createTextNode(lkey[0]||"\xa0"));var className=[];if(this.VKI_deadkeysOn)for(key in this.VKI_deadkey)if(key===lkey[0]){className.push("alive");break}if(lyt.length>this.VKI_keyCenter&&y==lyt.length)className.push("last");if(lkey[0]==" ")className.push("space");td.className=className.join(" ");td.VKI_clickless=0;if(!td.click){td.click=function(){var evt=this.ownerDocument.createEvent('MouseEvents');evt.initMouseEvent('click',true,true,this.ownerDocument.defaultView,1,0,0,0,0,false,false,false,false,0,null);this.dispatchEvent(evt)}}td.onmouseover=function(){if(self.VKI_clickless){var _self=this;clearTimeout(this.VKI_clickless);this.VKI_clickless=setTimeout(function(){_self.click()},self.VKI_clickless)}if((this.firstChild.nodeValue||this.firstChild.className)!="\xa0")this.className+=" hover"};td.onmouseout=function(){if(self.VKI_clickless)clearTimeout(this.VKI_clickless);this.className=this.className.replace(/ ?(hover|pressed)/g,"")};td.onmousedown=function(){if(self.VKI_clickless)clearTimeout(this.VKI_clickless);if((this.firstChild.nodeValue||this.firstChild.className)!="\xa0")this.className+=" pressed"};td.onmouseup=function(){if(self.VKI_clickless)clearTimeout(this.VKI_clickless);this.className=this.className.replace(/ ?pressed/g,"")};td.ondblclick=function(){return false};switch(lkey[1]){case"Caps":case"Shift":case"Alt":case"AltGr":case"AltLk":td.onclick=(function(type){return function(){self.VKI_modify(type);return false}})(lkey[1]);break;case"Tab":td.onclick=function(){self.VKI_insert("\t");return false};break;case"Bksp":td.onclick=function(){self.VKI_target.focus();if(self.VKI_target.setSelectionRange&&!self.VKI_target.readOnly){var rng=[self.VKI_target.selectionStart,self.VKI_target.selectionEnd];if(rng[0]<rng[1])rng[0]++;self.VKI_target.value=self.VKI_target.value.substr(0,rng[0]-1)+self.VKI_target.value.substr(rng[1]);self.VKI_target.setSelectionRange(rng[0]-1,rng[0]-1)}else if(self.VKI_target.createTextRange&&!self.VKI_target.readOnly){try{self.VKI_target.range.select()}catch(e){self.VKI_target.range=document.selection.createRange()}if(!self.VKI_target.range.text.length)self.VKI_target.range.moveStart('character',-1);self.VKI_target.range.text=""}else self.VKI_target.value=self.VKI_target.value.substr(0,self.VKI_target.value.length-1);if(self.VKI_shift)self.VKI_modify("Shift");if(self.VKI_altgr)self.VKI_modify("AltGr");self.VKI_target.focus();return true};break;case"Enter":td.onclick=function(){if(self.VKI_target.nodeName!="TEXTAREA"){self.VKI_close();this.className=this.className.replace(/ ?(hover|pressed)/g,"")}else self.VKI_insert("\n");return true};break;default:td.onclick=function(){var character=this.firstChild.nodeValue||this.firstChild.className;if(self.VKI_deadkeysOn&&self.VKI_dead){if(self.VKI_dead!=character){for(key in self.VKI_deadkey){if(key==self.VKI_dead){if(character!=" "){for(var z=0,rezzed=false,dk;dk=self.VKI_deadkey[key][z++];){if(dk[0]==character){self.VKI_insert(dk[1]);rezzed=true;break}}}else{self.VKI_insert(self.VKI_dead);rezzed=true}break}}}else rezzed=true}self.VKI_dead=false;if(!rezzed&&character!="\xa0"){if(self.VKI_deadkeysOn){for(key in self.VKI_deadkey){if(key==character){self.VKI_dead=key;this.className+=" dead";if(self.VKI_shift)self.VKI_modify("Shift");if(self.VKI_altgr)self.VKI_modify("AltGr");break}}if(!self.VKI_dead)self.VKI_insert(character)}else self.VKI_insert(character)}self.VKI_modify("");if(self.VKI_isOpera){this.style.width="50px";var foo=this.offsetWidth;this.style.width=""}return false}}tr.appendChild(td);tbody.appendChild(tr);table.appendChild(tbody);for(var z=0;z<4;z++)if(this.VKI_deadkey[lkey[z]=lkey[z]||"\xa0"])hasDeadKey=true}container.appendChild(table)}this.VKI_deadkeysElem.style.display=(!this.VKI_layout[this.VKI_kt].DDK&&hasDeadKey)?"inline":"none"};this.VKI_buildKeys();this.VKI_keyboard.onselectstart=function(){return false};this.VKI_keyboard.unselectable="on";if(this.VKI_isOpera)this.VKI_keyboard.onmousedown=function(){return false};this.VKI_modify=function(type){switch(type){case"Alt":case"AltGr":this.VKI_altgr=!this.VKI_altgr;break;case"AltLk":this.VKI_altgr=0;this.VKI_altgrlock=!this.VKI_altgrlock;break;case"Caps":this.VKI_shift=0;this.VKI_shiftlock=!this.VKI_shiftlock;break;case"Shift":this.VKI_shift=!this.VKI_shift;break}var vchar=0;if(!this.VKI_shift!=!this.VKI_shiftlock)vchar+=1;if(!this.VKI_altgr!=!this.VKI_altgrlock)vchar+=2;var tables=this.VKI_keyboard.getElementsByTagName('table');for(var x=0;x<tables.length;x++){var tds=tables[x].getElementsByTagName('td');for(var y=0;y<tds.length;y++){var className=[],lkey=this.VKI_layout[this.VKI_kt][x][y];if(tds[y].className.indexOf('hover')>-1)className.push("hover");switch(lkey[1]){case"Alt":case"AltGr":if(this.VKI_altgr)className.push("dead");break;case"AltLk":if(this.VKI_altgrlock)className.push("dead");break;case"Shift":if(this.VKI_shift)className.push("dead");break;case"Caps":if(this.VKI_shiftlock)className.push("dead");break;case"Tab":case"Enter":case"Bksp":break;default:if(type){tds[y].removeChild(tds[y].firstChild);if(this.VKI_symbol[lkey[vchar]]){var span=document.createElement('span');span.className=lkey[vchar];span.appendChild(document.createTextNode(this.VKI_symbol[lkey[vchar]]));tds[y].appendChild(span)}else tds[y].appendChild(document.createTextNode(lkey[vchar]))}if(this.VKI_deadkeysOn){var character=tds[y].firstChild.nodeValue||tds[y].firstChild.className;if(this.VKI_dead){if(character==this.VKI_dead)className.push("dead");for(var z=0;z<this.VKI_deadkey[this.VKI_dead].length;z++){if(character==this.VKI_deadkey[this.VKI_dead][z][0]){className.push("target");break}}}for(key in this.VKI_deadkey)if(key===character){className.push("alive");break}}}if(y==tds.length-1&&tds.length>this.VKI_keyCenter)className.push("last");if(lkey[0]==" ")className.push("space");tds[y].className=className.join(" ")}}};this.VKI_insert=function(text){this.VKI_target.focus();if(this.VKI_target.maxLength)this.VKI_target.maxlength=this.VKI_target.maxLength;if(typeof this.VKI_target.maxlength=="undefined"||this.VKI_target.maxlength<0||this.VKI_target.value.length<this.VKI_target.maxlength){if(this.VKI_target.setSelectionRange&&!this.VKI_target.readOnly){var rng=[this.VKI_target.selectionStart,this.VKI_target.selectionEnd];this.VKI_target.value=this.VKI_target.value.substr(0,rng[0])+text+this.VKI_target.value.substr(rng[1]);if(text=="\n"&&window.opera)rng[0]++;this.VKI_target.setSelectionRange(rng[0]+text.length,rng[0]+text.length)}else if(this.VKI_target.createTextRange&&!this.VKI_target.readOnly){try{this.VKI_target.range.select()}catch(e){this.VKI_target.range=document.selection.createRange()}this.VKI_target.range.text=text;this.VKI_target.range.collapse(true);this.VKI_target.range.select()}else this.VKI_target.value+=text;if(this.VKI_shift)this.VKI_modify("Shift");if(this.VKI_altgr)this.VKI_modify("AltGr");this.VKI_target.focus()}else if(this.VKI_target.createTextRange&&this.VKI_target.range)this.VKI_target.range.select()};this.VKI_show=function(elem){if(!this.VKI_target){this.VKI_target=elem;if(this.VKI_langAdapt&&this.VKI_target.lang){var chg=false,sub=[];for(ktype in this.VKI_layout){if(typeof this.VKI_layout[ktype]=="object"){for(var x=0;x<this.VKI_layout[ktype].lang.length;x++){if(this.VKI_layout[ktype].lang[x].toLowerCase()==this.VKI_target.lang.toLowerCase()){chg=kblist.value=this.VKI_kt=ktype;break}else if(this.VKI_layout[ktype].lang[x].toLowerCase().indexOf(this.VKI_target.lang.toLowerCase())==0)sub.push([this.VKI_layout[ktype].lang[x],ktype])}}if(chg)break}if(sub.length){sub.sort(function(a,b){return a[0].length-b[0].length});chg=kblist.value=this.VKI_kt=sub[0][1]}if(chg)this.VKI_buildKeys()}if(this.VKI_isIE){if(!this.VKI_target.range){this.VKI_target.range=this.VKI_target.createTextRange();this.VKI_target.range.moveStart('character',this.VKI_target.value.length)}this.VKI_target.range.select()}try{this.VKI_keyboard.parentNode.removeChild(this.VKI_keyboard)}catch(e){}if(this.VKI_clearPasswords&&this.VKI_target.type=="password")this.VKI_target.value="";var elem=this.VKI_target;this.VKI_target.keyboardPosition="absolute";do{if(VKI_getStyle(elem,"position")=="fixed"){this.VKI_target.keyboardPosition="fixed";break}}while(elem=elem.offsetParent);if(this.VKI_isIE6)document.body.appendChild(this.VKI_iframe);document.body.appendChild(this.VKI_keyboard);this.VKI_keyboard.style.position=this.VKI_target.keyboardPosition;if(this.VKI_isOpera){if(this.VKI_sizeAdj)kbsize.value=this.VKI_size;kblist.value=this.VKI_kt}this.VKI_position(true);if(self.VKI_isMoz||self.VKI_isWebKit)this.VKI_position(true);this.VKI_target.focus()}else this.VKI_close()};this.VKI_position=function(force){if(self.VKI_target){var kPos=VKI_findPos(self.VKI_keyboard),wDim=VKI_innerDimensions(),sDis=VKI_scrollDist();var place=false,fudge=self.VKI_target.offsetHeight+3;if(force!==true){if(kPos[1]+self.VKI_keyboard.offsetHeight-sDis[1]-wDim[1]>0){place=true;fudge=-self.VKI_keyboard.offsetHeight-3}else if(kPos[1]-sDis[1]<0)place=true}if(place||force===true){var iPos=VKI_findPos(self.VKI_target);self.VKI_keyboard.style.top=iPos[1]-((self.VKI_target.keyboardPosition=="fixed"&&!self.VKI_isIE&&!self.VKI_isMoz)?sDis[1]:0)+fudge+"px";self.VKI_keyboard.style.left=Math.max(10,Math.min(wDim[0]-self.VKI_keyboard.offsetWidth-25,iPos[0]))+"px";if(self.VKI_isIE6){self.VKI_iframe.style.width=self.VKI_keyboard.offsetWidth+"px";self.VKI_iframe.style.height=self.VKI_keyboard.offsetHeight+"px";self.VKI_iframe.style.top=self.VKI_keyboard.style.top;self.VKI_iframe.style.left=self.VKI_keyboard.style.left}}if(force===true)self.VKI_position()}};if(window.addEventListener){window.addEventListener('resize',this.VKI_position,false);window.addEventListener('scroll',this.VKI_position,false)}else if(window.attachEvent){window.attachEvent('onresize',this.VKI_position);window.attachEvent('onscroll',this.VKI_position)}if(this.VKI_sizeAdj)kbsize.change();this.VKI_close=VKI_close=function(){if(this.VKI_target){try{this.VKI_keyboard.parentNode.removeChild(this.VKI_keyboard);if(this.VKI_isIE6)this.VKI_iframe.parentNode.removeChild(this.VKI_iframe)}catch(e){}if(this.VKI_kt!=this.VKI_kts){kblist.value=this.VKI_kt=this.VKI_kts;this.VKI_buildKeys()}this.VKI_target.focus();if(this.VKI_isIE){setTimeout(function(){self.VKI_target=false},0)}else this.VKI_target=false}}}function VKI_findPos(obj){var curleft=curtop=0;do{curleft+=obj.offsetLeft;curtop+=obj.offsetTop}while(obj=obj.offsetParent);return[curleft,curtop]}function VKI_innerDimensions(){if(self.innerHeight){return[self.innerWidth,self.innerHeight]}else if(document.documentElement&&document.documentElement.clientHeight){return[document.documentElement.clientWidth,document.documentElement.clientHeight]}else if(document.body)return[document.body.clientWidth,document.body.clientHeight];return[0,0]}function VKI_scrollDist(){var html=document.getElementsByTagName('html')[0];if(html.scrollTop&&document.documentElement.scrollTop){return[html.scrollLeft,html.scrollTop]}else if(html.scrollTop||document.documentElement.scrollTop){return[html.scrollLeft+document.documentElement.scrollLeft,html.scrollTop+document.documentElement.scrollTop]}else if(document.body.scrollTop)return[document.body.scrollLeft,document.body.scrollTop];return[0,0]}function VKI_getStyle(obj,styleProp){if(obj.currentStyle){var y=obj.currentStyle[styleProp]}else if(window.getComputedStyle)var y=window.getComputedStyle(obj,null)[styleProp];return y}if(window.addEventListener){window.addEventListener('load',VKI_buildKeyboardInputs,false)}else if(window.attachEvent)window.attachEvent('onload',VKI_buildKeyboardInputs);
    </script>
    <h2 id="h2">You can now write Tibetan in Facebook by using this virtual tibetan keyboard..</h2>
    <h3 id="h3">ཁྱེད་རང་གིས་མཐེབ་གཞོང་(keyboard)འདི་སྤྱད་ནས་ངོ་དེབ་(Facebook)ནང་བོད་ཡིག་འབྲི་ཐུབ།་</h3>
    <p><span style="font-family:Verdana, Arial, Helvetica, sans-serif; font-size:12px; color:#000000">I dedicate this Apps in solidarity to support the Tibetan students in Amdo who have staged massive demonstrations to oppose Chinese government plans to replace Tibetan by Chinese language as the medium of instruction.</span> by <a href="http://www.facebook.com/tasamp">Tashi Samphel</a> 
      </h4>
      <p>
   <span style="font-family:Verdana, Arial, Helvetica, sans-serif; font-size:12px; color:#000000">
   You can also Download Unicode Keyboard, i created for Windows Computer: <a href="http://tibetmycountry.com/download/TCRCUKBD-amd64.zip">Download Unicode Keyboard for Windows Computer</a></span> </p>
         <?php
 echo ("<form name='frm' method='POST'>");
 echo ("<TEXTAREA id='textfield' name='word' rows='4' cols='40' class='keyboardInput'></TEXTAREA>");
  echo ("</form>");
	 ?>
      </p>
    <p><br />
        </p>
  <div id='keybd'>
<DIV id='keyboard'></DIV></div>

    </div>
<div><span style="font-family:Verdana, Arial, Helvetica, sans-serif; font-size:12px; font-weight:bold; color:#0000FF">
    How to use this application (Tibetan Virtual Keyboard)</span>
<span style="font-family:Verdana, Arial, Helvetica, sans-serif; font-size:11px; color:#333333">
 <ol><li>
Click on the Keyboard symbol or icon to activate the virtual Tibetan keyboard.
</li>
<li> By default it is Tibetan language, but you can change it into English or number pad by selecting the option.</li>
<li>You can also change the size of keyboard by selecting the number. There are five options in the selection box and 1 for smallest, 3 for medium and 5 for largest size.</li>
<li>Check box that makes the dead key functional or not. It's important to enable the dead key for Tibetan language but you can disable it for english language otherwise letter "a" didn't work.</li>
<li>Clear button is to reset the form or delete the text.</li>
<li> To hide the keyboard press the Cross button</li>
<li>To write <font face="TCRC Youtso Unicode" size="14">སྐྱ་</font>click on the word <font face="TCRC Youtso Unicode" size="13">ས</font><font size="14">a</font><font face="TCRC Youtso Unicode" size="13">ཀ</font><font size="14">a</font><font face="TCRC Youtso Unicode" size="13">ཡ་</font>but don't forget to check that check box་ to enable dead key - a</li>
<li>To enable the words that are under SHIFT you have to click on SHIFT, it automatically shows up the words.</li>
<li> Keyboard layout is same as TCRC Bodyig layout.</li>
</ol>
</span>
    </div>
    <br />
<div><span style="font-family:Verdana, Arial, Helvetica, sans-serif; font-size:10px; color:#666666">Copyright &copy; 2010. All Right Reserved to Tashi Samphel.</span></div>
</body>
</html>
